#!/usr/bin/env python3

from base64 import b64decode

# Please do the lab legitimately - if you need help, just ask us!
exec(b64decode("""aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHJhbmRvbQppbXBvcnQgaGFzaGxpYgppbXBvcnQgZ2VuZXJhdGVfY2x1ZXMgYXMgZ2MKaW1wb3J0IHN1YnByb2Nlc3MgYXMgc3AKCgpkZWYgc2hlbGxfb3V0KGNvbW0pOgogICAgcmV0dXJuIHNwLnJ1bihjb21tLnNwbGl0KCksIGNhcHR1cmVfb3V0cHV0PVRydWUpLnN0ZG91dC5kZWNvZGUoKQoKCmRlZiBjaGVja19oaW50KGNsdWUsIGhpbnQsIGRpY3Rpb25hcnkpOgogICAgaWYgY2x1ZSA9PSAzOgogICAgICAgIGNvdW50ID0gbGVuKG9zLmxpc3RkaXIoIi91c3IiKSkKICAgICAgICByZXR1cm4gaW50KGhpbnQpID09IGNvdW50CiAgICBlbGlmIGNsdWUgPT0gNDoKICAgICAgICBob3N0bmFtZSA9IG9wZW4oIi9ldGMvaG9zdG5hbWUiLCAiciIpLnJlYWQoKS5zdHJpcCgpCiAgICAgICAgcmV0dXJuIGhpbnQgPT0gaG9zdG5hbWUKICAgIGVsaWYgY2x1ZSA9PSA1OgogICAgICAgIHJldHVybiBoaW50IGluIFsiaSIsICJuIiwgIi1pIiwgIi1uIl0KICAgIGVsaWYgY2x1ZSA9PSA2OgogICAgICAgIHJldHVybiBoaW50ID09IG9zLmdldGVudigiUEFUSCIpLnNwbGl0KCI6IilbLTFdCiAgICBlbGlmIGNsdWUgPT0gNzoKICAgICAgICByZXR1cm4gaGludCA9PSBzaGVsbF9vdXQoIndoaWNoIHB5dGhvbiIpLnN0cmlwKCkKICAgIGVsaWYgY2x1ZSA9PSA4OgogICAgICAgIHJldHVybiBoaW50IGluIFsiY3B1Il0KICAgIGVsaWYgY2x1ZSA9PSA5OgogICAgICAgIHZhbCA9IHNoZWxsX291dChmIndjIC1sIHtkaWN0aW9uYXJ5fSIpLnNwbGl0KClbMF0KICAgICAgICByZXR1cm4gaGludCA9PSB2YWwKICAgIGVsaWYgY2x1ZSA9PSAxMDoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBoaW50ID09IHNoZWxsX291dChmImdyZXAgLUEgMSB0YWN0ZnVsIHtkaWN0aW9uYXJ5fSIpLnN0cmlwKCkuc3BsaXQoIlxuIilbMV0KICAgICAgICApCiAgICBlbGlmIGNsdWUgPT0gMTI6CiAgICAgICAgd2l0aCBvcGVuKCJSRUFETUUubWQiLCAiciIpIGFzIGY6CiAgICAgICAgICAgIHJldHVybiAiY2F0cyBhcmUgYmV0dGVyIHRoYW4gZG9ncyIgaW4gIiIuam9pbihmLnJlYWRsaW5lcygpKQogICAgZWxpZiBjbHVlID09IDExOgogICAgICAgIGlmIG5vdCBoaW50LnN0YXJ0c3dpdGgoIi0iKToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgaWYgbm90ICgiayA1IiBpbiBoaW50IG9yICJrNSIgaW4gaGludCk6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGlmIG5vdCAiciIgaW4gaGludDoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgaWYgbm90ICgibiIgaW4gaGludCBvciAiZyIgaW4gaGludCk6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHJldHVybiBUcnVlCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKCiAgICBpZiBsZW4oc3lzLmFyZ3YpICE9IDM6CiAgICAgICAgc3lzLmV4aXQoIk5lZWQgYSBjbHVlIG51bWJlciBhbmQgaGludCIpCiAgICBjbHVlX251bWJlciA9IGludChzeXMuYXJndlsxXSkKICAgIGhpbnQgPSBzeXMuYXJndlsyXQogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbigiLnNlY3JldF9udW1iZXIiLCAiciIpIGFzIGY6CiAgICAgICAgICAgIHNlY3JldF9udW1iZXIgPSBpbnQoIiIuam9pbihmLnJlYWRsaW5lcygpKSkKICAgIGV4Y2VwdDoKICAgICAgICBzeXMuZXhpdCgiR2VuZXJhdGUgdGhlIGNsdWVzIGZpcnN0ISIpCgogICAgY2x1ZV9pbmRleGVzID0gZ2MuZ2VuX2NsdWVfbGlzdCgKICAgICAgICBnYy5TVEFSVF9DTFVFLCBnYy5MQVNUX0NMVUUsIGdjLkNMVUVfU1BBQ0UsIHNlY3JldF9udW1iZXIKICAgICkKICAgIGRpY3Rpb25hcnkgPSBvcGVuKCJjb25mIiwgInIiKS5yZWFkKCkuc3RyaXAoKQoKICAgIGlmIGNoZWNrX2hpbnQoY2x1ZV9udW1iZXIsIGhpbnQsIGRpY3Rpb25hcnkpOgogICAgICAgIHByaW50KGdjLnplcm9fcGFkKGNsdWVfaW5kZXhlc1tjbHVlX251bWJlciAtIGdjLlNUQVJUX0NMVUVdKSkKICAgIGVsc2U6CiAgICAgICAgUiA9IHJhbmRvbS5SYW5kb20oKQogICAgICAgIGlmIHR5cGUoaGludCkgPT0gc3RyOgogICAgICAgICAgICBtZDUgPSBoYXNobGliLm1kNShoaW50LmVuY29kZSgpKQogICAgICAgICAgICBoaW50X251bWJlciA9IGludChtZDUuaGV4ZGlnZXN0KCksIDE2KQogICAgICAgIFIuc2VlZChzZWNyZXRfbnVtYmVyICsgY2x1ZV9udW1iZXIgKyBoaW50X251bWJlcikKICAgICAgICBwcmludChnYy56ZXJvX3BhZChSLnJhbmRpbnQoMSwgZ2MuQ0xVRV9TUEFDRSkpKQoK"""))
# Please do the lab legitimately - if you need help, just ask us!
